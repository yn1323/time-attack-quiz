# タイムアタッククイズ大会アプリ - 実装方針

## デザインコンセプト

**トーン**: TVクイズ番組風 × ポップマキシマリズム
- 90年代〜2000年代の日本のクイズ番組を彷彿とさせる派手さ
- グラデーション、光沢感、立体的なボタン
- 大きな文字、明快なコントラスト
- 視認性重視（プロジェクター投影を想定）

**差別化ポイント**: ネオンサイン風の光彩効果 + 幾何学パターン背景

---

## カラーパレット

```typescript
// app/theme.ts
const colors = {
  quiz: {
    // メイン: オレンジ
    orange: {
      500: "#FF8800",  // プライマリ
      600: "#E67A00",  // ホバー
      gradient: "linear-gradient(135deg, #FF8800 0%, #FF6B00 100%)"
    },
    // アクセント: イエロー
    yellow: {
      500: "#FFE500",
      gradient: "linear-gradient(135deg, #FFE500 0%, #FFC800 100%)"
    },
    // 正解/不正解
    correct: "#22C55E",
    correctBg: "#DCFCE7",
    incorrect: "#EF4444",
    incorrectBg: "#FEE2E2",
    // 背景
    bg: "#FFFDF7",        // クリーム白
    bgPattern: "#FFF5E6", // パターン用
  }
}
```

---

## フォント設定

```typescript
// app/layout.tsx
import { Zen_Maru_Gothic } from "next/font/google"

const zenMaruGothic = Zen_Maru_Gothic({
  weight: ["400", "500", "700", "900"],
  subsets: ["latin"],
  variable: "--font-zen-maru",
})
```

---

## 共通レイアウトパターン

### 背景パターン（全ページ共通）
```tsx
// 幾何学パターン + グラデーション背景
<Box
  minH="100vh"
  bg="quiz.bg"
  position="relative"
  _before={{
    content: '""',
    position: "absolute",
    inset: 0,
    backgroundImage: `
      radial-gradient(circle at 20% 80%, rgba(255,136,0,0.1) 0%, transparent 50%),
      radial-gradient(circle at 80% 20%, rgba(255,229,0,0.1) 0%, transparent 50%)
    `,
    pointerEvents: "none",
  }}
>
```

### カード共通スタイル
```tsx
<Box
  bg="white"
  borderRadius="2xl"
  boxShadow="0 4px 20px rgba(255,136,0,0.15)"
  border="3px solid"
  borderColor="quiz.orange.500"
  p={8}
>
```

### プライマリボタン
```tsx
<Button
  size="xl"
  bg="linear-gradient(135deg, #FF8800 0%, #FF6B00 100%)"
  color="white"
  fontWeight="bold"
  fontSize="xl"
  px={12}
  py={6}
  borderRadius="full"
  boxShadow="0 4px 15px rgba(255,136,0,0.4)"
  _hover={{
    transform: "translateY(-2px)",
    boxShadow: "0 6px 20px rgba(255,136,0,0.5)",
  }}
>
```

---

## ページ別実装方針

### 1. TOPページ (`/`)

**レイアウト**: 中央集中型ヒーロー

```
┌─────────────────────────────────────┐
│         (装飾パターン背景)           │
│                                     │
│      ╔═══════════════════════╗      │
│      ║  🎯 TIME ATTACK QUIZ  ║      │  ← タイトル（グラデーション文字）
│      ╚═══════════════════════╝      │
│                                     │
│        〜タイムアタック〜            │  ← サブタイトル
│          クイズ大会                 │
│                                     │
│      ┌─────────────────────┐        │
│      │  🎉 大会をはじめる   │        │  ← CTAボタン（オレンジグラデ）
│      └─────────────────────┘        │
│                                     │
└─────────────────────────────────────┘
```

**コード例**:
```tsx
// app/page.tsx
export default function HomePage() {
  return (
    <Box minH="100vh" bg="quiz.bg" display="flex" alignItems="center" justifyContent="center">
      <VStack gap={8}>
        {/* タイトル */}
        <Heading
          as="h1"
          fontSize="6xl"
          fontWeight="900"
          bgGradient="linear(to-r, quiz.orange.500, quiz.yellow.500)"
          bgClip="text"
          textShadow="2px 2px 0 rgba(255,136,0,0.3)"
        >
          TIME ATTACK QUIZ
        </Heading>

        {/* サブタイトル */}
        <Text fontSize="2xl" color="quiz.orange.600" fontWeight="bold">
          〜タイムアタック〜 クイズ大会
        </Text>

        {/* CTAボタン */}
        <Button
          size="2xl"
          bg="linear-gradient(135deg, #FF8800, #FF6B00)"
          color="white"
          px={16}
          py={8}
          fontSize="2xl"
          borderRadius="full"
        >
          🎉 大会をはじめる
        </Button>
      </VStack>
    </Box>
  )
}
```

---

### 2. ロビーページ (`/lobby/[lobbyId]`)

**レイアウト**: ヘッダー + 中央カード + 参加者リスト

```
┌─────────────────────────────────────┐
│  ロビー: ABC123        [URLコピー]  │  ← ヘッダー
├─────────────────────────────────────┤
│                                     │
│      ━━━ 参加者募集中！ ━━━         │
│                                     │
│    ┌───────────────────────────┐    │
│    │  グループ名を入力         │    │  ← 入力カード
│    │  ┌─────────────────────┐  │    │
│    │  │ (テキスト入力)      │  │    │
│    │  └─────────────────────┘  │    │
│    │      [参加する！]         │    │
│    └───────────────────────────┘    │
│                                     │
│    現在の参加グループ (3組)         │
│    🟡チームA  🟡チームB  🟡チームC   │  ← チップ形式
│                                     │
└─────────────────────────────────────┘
```

**コード例**:
```tsx
// app/lobby/[lobbyId]/page.tsx
export default function LobbyPage() {
  return (
    <Box minH="100vh" bg="quiz.bg">
      {/* ヘッダー */}
      <Flex justify="space-between" align="center" p={4} borderBottom="2px solid" borderColor="quiz.orange.200">
        <Text fontSize="lg" fontWeight="bold">ロビー: ABC123</Text>
        <Button variant="outline" colorPalette="orange">URLをコピー 📋</Button>
      </Flex>

      {/* メインコンテンツ */}
      <VStack py={12} gap={8}>
        <Heading color="quiz.orange.600">━━━ 参加者募集中！ ━━━</Heading>

        {/* 入力カード */}
        <Box bg="white" p={8} borderRadius="2xl" boxShadow="xl" border="3px solid" borderColor="quiz.orange.500" w="400px">
          <VStack gap={6}>
            <Text fontWeight="bold" fontSize="lg">グループ名を入力してください</Text>
            <Input placeholder="チーム名" size="lg" borderColor="quiz.orange.300" />
            <Button w="full" bg="quiz.orange.500" color="white" size="lg">参加する！</Button>
          </VStack>
        </Box>

        {/* 参加者一覧 */}
        <Box>
          <Text mb={4} fontWeight="bold">現在の参加グループ (3組)</Text>
          <HStack gap={3}>
            <Badge colorPalette="yellow" size="lg" px={4} py={2}>🟡 チームA</Badge>
            <Badge colorPalette="yellow" size="lg" px={4} py={2}>🟡 チームB</Badge>
            <Badge colorPalette="yellow" size="lg" px={4} py={2}>🟡 チームC</Badge>
          </HStack>
        </Box>
      </VStack>
    </Box>
  )
}
```

---

### 3. グループページ - クイズ回答中

**レイアウト**: ステータスバー + 問題カード + 選択肢3列

```
┌─────────────────────────────────────┐
│  チームA      ⏱️ 7:32     💰 45点   │  ← ステータスバー
├─────────────────────────────────────┤
│                                     │
│    ┌───────────────────────────┐    │
│    │                           │    │
│    │  Q. 日本で一番高い山は？  │    │  ← 問題カード（大きめ）
│    │                           │    │
│    └───────────────────────────┘    │
│                                     │
│    ┌─────────────────────────┐      │
│    │  A. 富士山               │      │  ← 選択肢（縦並び）
│    └─────────────────────────┘      │
│    ┌─────────────────────────┐      │
│    │  B. 北岳                 │      │
│    └─────────────────────────┘      │
│    ┌─────────────────────────┐      │
│    │  C. 奥穂高岳             │      │
│    └─────────────────────────┘      │
│                                     │
└─────────────────────────────────────┘
```

**コード例**:
```tsx
// app/group/[groupId]/_components/GroupQuiz.tsx
export function GroupQuiz() {
  return (
    <Box minH="100vh" bg="quiz.bg">
      {/* ステータスバー */}
      <Flex
        justify="space-between"
        align="center"
        p={4}
        bg="white"
        borderBottom="3px solid"
        borderColor="quiz.orange.500"
      >
        <Text fontSize="xl" fontWeight="bold">チームA</Text>
        <HStack gap={8}>
          <HStack>
            <Text fontSize="2xl">⏱️</Text>
            <Text fontSize="2xl" fontWeight="bold" color="quiz.orange.600">7:32</Text>
          </HStack>
          <HStack>
            <Text fontSize="2xl">💰</Text>
            <Text fontSize="2xl" fontWeight="bold" color="quiz.yellow.600">45点</Text>
          </HStack>
        </HStack>
      </Flex>

      {/* 問題エリア */}
      <VStack py={8} px={12} gap={8}>
        {/* 問題カード */}
        <Box
          w="full"
          bg="white"
          p={10}
          borderRadius="2xl"
          border="4px solid"
          borderColor="quiz.orange.500"
          textAlign="center"
        >
          <Text fontSize="3xl" fontWeight="bold">
            Q. 日本で一番高い山は？
          </Text>
        </Box>

        {/* 選択肢 */}
        <VStack w="full" gap={4}>
          {["A. 富士山", "B. 北岳", "C. 奥穂高岳"].map((choice, i) => (
            <Button
              key={i}
              w="full"
              h="80px"
              bg="white"
              border="3px solid"
              borderColor="quiz.orange.300"
              fontSize="xl"
              fontWeight="bold"
              justifyContent="flex-start"
              px={8}
              _hover={{
                bg: "quiz.orange.100",
                borderColor: "quiz.orange.500",
                transform: "scale(1.02)",
              }}
            >
              {choice}
            </Button>
          ))}
        </VStack>
      </VStack>
    </Box>
  )
}
```

---

### 4. グループページ - 回答結果（正解）

**レイアウト**: 結果バナー + 問題振り返り + 次へボタン

```
┌─────────────────────────────────────┐
│  チームA      ⏱️ 7:28     💰 50点   │
├─────────────────────────────────────┤
│                                     │
│      ╔═══════════════════════╗      │
│      ║  ⭕ 正解！ +5点       ║      │  ← 正解バナー（緑背景）
│      ╚═══════════════════════╝      │
│                                     │
│    Q. 日本で一番高い山は？          │
│                                     │
│    ┌─────────────────────────┐      │
│    │ ✓ A. 富士山 ← 正解      │      │  ← 正解ハイライト（緑枠）
│    └─────────────────────────┘      │
│    ┌ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ┐      │
│    │ B. 北岳                 │      │  ← 他選択肢（薄く）
│    └ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ┘      │
│                                     │
│         [次の問題へ →]              │
│                                     │
└─────────────────────────────────────┘
```

**コード例**:
```tsx
// app/group/[groupId]/_components/GroupResult.tsx
export function GroupResult({ isCorrect }: { isCorrect: boolean }) {
  return (
    <Box minH="100vh" bg="quiz.bg">
      {/* ステータスバー（省略） */}

      <VStack py={8} gap={6}>
        {/* 結果バナー */}
        <Box
          bg={isCorrect ? "quiz.correctBg" : "quiz.incorrectBg"}
          border="4px solid"
          borderColor={isCorrect ? "quiz.correct" : "quiz.incorrect"}
          borderRadius="2xl"
          px={16}
          py={6}
        >
          <Text fontSize="4xl" fontWeight="900" color={isCorrect ? "quiz.correct" : "quiz.incorrect"}>
            {isCorrect ? "⭕ 正解！ +5点" : "❌ 不正解 -3点"}
          </Text>
        </Box>

        {/* 問題 */}
        <Text fontSize="xl" fontWeight="bold">Q. 日本で一番高い山は？</Text>

        {/* 選択肢（正解ハイライト） */}
        <VStack w="600px" gap={3}>
          <Box
            w="full"
            p={4}
            bg="quiz.correctBg"
            border="3px solid"
            borderColor="quiz.correct"
            borderRadius="xl"
          >
            <Text fontWeight="bold">✓ A. 富士山 ← 正解</Text>
          </Box>
          <Box w="full" p={4} bg="gray.100" borderRadius="xl" opacity={0.6}>
            <Text>B. 北岳</Text>
          </Box>
        </VStack>

        {/* 次へボタン */}
        <Button bg="quiz.orange.500" color="white" size="lg" mt={4}>
          次の問題へ →
        </Button>
      </VStack>
    </Box>
  )
}
```

---

### 5. 管理ページ - クイズ中（プロジェクター用）

**レイアウト**: 大きな時計 + ランキングリスト（プログレスバー付き）

```
┌─────────────────────────────────────┐
│                         ⏱️ 7:32     │  ← 残り時間（超大きく）
├─────────────────────────────────────┤
│                                     │
│     ━━━ 🏆 リアルタイムランキング ━━━   │
│                                     │
│  ┌────────────────────────────────┐ │
│  │ 🥇 1位  チームA          85点  │ │
│  │ ████████████████████░░░░░░░░░░ │ │  ← プログレスバー
│  └────────────────────────────────┘ │
│                                     │
│  ┌────────────────────────────────┐ │
│  │ 🥈 2位  チームC          72点  │ │
│  │ ██████████████████░░░░░░░░░░░░ │ │
│  └────────────────────────────────┘ │
│                                     │
│  （以下同様...）                     │
│                                     │
└─────────────────────────────────────┘
```

**コード例**:
```tsx
// app/admin/[lobbyId]/_components/AdminDuringQuiz.tsx
export function AdminDuringQuiz() {
  const teams = [
    { rank: 1, name: "チームA", score: 85, medal: "🥇" },
    { rank: 2, name: "チームC", score: 72, medal: "🥈" },
    { rank: 3, name: "チームB", score: 65, medal: "🥉" },
    { rank: 4, name: "チームD", score: 58, medal: "" },
  ]
  const maxScore = 100

  return (
    <Box minH="100vh" bg="quiz.bg" p={8}>
      {/* 残り時間 */}
      <Flex justify="flex-end" mb={8}>
        <HStack>
          <Text fontSize="4xl">⏱️</Text>
          <Text fontSize="6xl" fontWeight="900" color="quiz.orange.600">7:32</Text>
        </HStack>
      </Flex>

      {/* タイトル */}
      <Heading textAlign="center" mb={8} color="quiz.orange.600">
        ━━━ 🏆 リアルタイムランキング 🏆 ━━━
      </Heading>

      {/* ランキング */}
      <VStack gap={6}>
        {teams.map((team) => (
          <Box
            key={team.rank}
            w="full"
            maxW="800px"
            mx="auto"
            bg="white"
            p={6}
            borderRadius="2xl"
            border="3px solid"
            borderColor={team.rank <= 3 ? "quiz.orange.500" : "gray.300"}
          >
            <Flex justify="space-between" align="center" mb={3}>
              <HStack>
                <Text fontSize="3xl">{team.medal}</Text>
                <Text fontSize="2xl" fontWeight="bold">{team.rank}位</Text>
                <Text fontSize="2xl" fontWeight="bold" ml={4}>{team.name}</Text>
              </HStack>
              <Text fontSize="3xl" fontWeight="900" color="quiz.orange.600">
                {team.score}点
              </Text>
            </Flex>
            {/* プログレスバー */}
            <Box bg="gray.200" borderRadius="full" h="20px" overflow="hidden">
              <Box
                bg="linear-gradient(90deg, #FF8800, #FFE500)"
                h="full"
                w={`${(team.score / maxScore) * 100}%`}
                borderRadius="full"
              />
            </Box>
          </Box>
        ))}
      </VStack>
    </Box>
  )
}
```

---

### 6. 結果発表ページ

**レイアウト**: 表彰台 + 統計情報

```
┌─────────────────────────────────────┐
│      ━━━ 🎊 結果発表 🎊 ━━━         │
├─────────────────────────────────────┤
│                                     │
│              🥇                     │
│         ┌─────────┐                 │  ← 1位（中央・高め）
│         │ チームA │                 │
│         │  125点  │                 │
│    🥈   └────┬────┘   🥉            │
│  ┌─────┐    │    ┌─────┐           │  ← 2位左、3位右
│  │チームC│    │    │チームB│           │
│  │ 108点 │    │    │ 95点  │           │
│  └─────┴────┴────┴─────┘           │
│  ═══════════════════════════════   │  ← 表彰台ベース
│                                     │
├─────────────────────────────────────┤
│  📊 統計情報                        │
│  ──────────────────────────────    │
│  🏃 最速正解賞: チームA (平均3.2秒)  │
│  🔥 ラストスパート賞: チームC (+28点) │
│  ✨ 連続正解記録: チームB (8問連続)  │
└─────────────────────────────────────┘
```

---

## ファイル構成

```
app/
├── theme.ts                          # カスタムテーマ
├── layout.tsx                        # ルートレイアウト
├── page.tsx                          # TOPページ
├── components/ui/provider.tsx        # Chakra Provider
├── lobby/[lobbyId]/page.tsx          # ロビーページ
├── group/[groupId]/
│   ├── page.tsx                      # メインページ（状態切り替え）
│   └── _components/
│       ├── GroupWaiting.tsx
│       ├── GroupQuiz.tsx
│       ├── GroupResult.tsx
│       └── GroupFinished.tsx
├── admin/[lobbyId]/
│   ├── page.tsx
│   └── _components/
│       ├── AdminBeforeStart.tsx
│       ├── AdminDuringQuiz.tsx
│       └── AdminAfterQuiz.tsx
└── result/[lobbyId]/page.tsx         # 結果発表
```

---

## 実装順序

1. **Phase 1**: テーマ設定（theme.ts, layout.tsx, provider.tsx）
2. **Phase 2**: TOPページ
3. **Phase 3**: ロビーページ
4. **Phase 4**: グループページ（4状態）
5. **Phase 5**: 管理ページ（3状態）
6. **Phase 6**: 結果発表ページ
